<%= javascript_include_tag :defaults %>


<div id="calendar_grid">
<% 7.times  do |x|%>
<ul>
  <% time = Time.now.beginning_of_week + x * 86400%>
  <li id="name_of_day">
    <%= time.strftime("%d-%A") %>
  </li>
  <% unless @calendar.events.empty? %>
    <% @calendar.events.each do |event| %>
      <% if event.start_on.day == time.day %>
		<li id="sortable">
		   <%=h event.title %>
		   <%= image_tag(event.chore.image_url) %> 
		</li>
	  <% end %>
    <% end %>
  <% end %>
</ul>
<%end%>
</div>

<style type="text/css">
	#draggable { }
	ul {float:left;
		padding:0px;}
	li {clear:both;
		border:2px solid #800000;
		list-style-type:none;
		width:100px;
		overflow:hidden;
		height:50px;
		color:#800000}
	li #draggable {border:2px solid #800000;
		}
	#calendar_grid	
	</style>

<!--	
	<script type="text/javascript">
	$(function() {
		$("#draggable").draggable();
		$("#sortable").sortable();
		$("#sortable").disableSelection();
		

	});
	</script>
	
-->




<h2><%=h @calendar.title %></h2>
<h3>Details</h3>
<p>
  <i>Description:</i><br/>
  <%=h @calendar.description %>
  
</p>
<p>
  <i>Last Calender Update On:</i><br/>
  <%=h @calendar.updated_at.strftime('%d.%m.%Y') %>
</p>

<% @id = @calendar.id %>
<!-- <%= show_calendar :highlight_today => true, :dates => @hashArray[@id-1] %> -->

<h3>Events</h3>
<% if @calendar.events.empty? %>
  <p>There are no events in this calendar yet!</p>
<% end %>
<% unless @calendar.events.empty? %>
  <% @calendar.events.each do |event| %>
    <p>
	  <%=h event.title %><br/>
      <%=h event.start_on.strftime('%d.%m.%Y') %>
	</p>
	<p>
	  <%= link_to 'Show Event', calendar_event_path(@calendar) %> |
	  <%= link_to 'Edit Event', edit_calendar_path(@calendar) %> |
	  <%= link_to 'Destroy Event', [@calendar, event], :confirm => 'Are you sure?', :method => :delete %>
	</p><br/>
  <% end %>
<% end %>
<h3>Create Chores</h3>
<%= render :partial => @chore = Chore.new, :locals => { :button_name => 'Create'} %>

<% if !@calendar.chores.empty? %>
<h3>Create new event</h3>
<%= render :partial => @event = Event.new, :locals => { :button_name => 'Create'}%>
<% end %>